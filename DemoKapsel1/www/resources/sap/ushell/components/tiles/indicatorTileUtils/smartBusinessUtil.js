jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.smartBusinessUtil");sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=(function(g,$){var f=function(){var o={};$.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/apps/kpi/s/logic/__token.xsjs",headers:{"X-CSRF-Token":"Fetch"},success:function(d,s,x){o.userName=d.userName;o.token=x.getResponseHeader("X-CSRF-Token");},error:function(){$.sap.log.error("Error Fetching AUTH TOKEN");}});return o;};var a=function(s){var r=[];for(var i=0;i<s.length;i++){r.push(JSON.parse(s[i]));}return r;};"use strict";var c={};return{getAuthToken:function(){return f().token;},getHanaUser:function(){return authObject.userName;},getEdmType:function(u,p){var d=null;if(u instanceof sap.ui.model.odata.ODataModel){d=u;}else{d=this.getODataModelByServiceUri(u);}if(d&&d.getServiceMetadata()){var s=d.getServiceMetadata();var e=s.dataServices.schema[0].entityType;if(e){for(var i=0;i<e.length;i++){var b=e[i];var h=b.property;for(var j=0;j<h.length;j++){var k=h[j];if(k.name==p){return k.type;}}}}}return null;},getODataModelByServiceUri:function(s){s=this.addSystemToServiceUrl(s);if(!c[s]){var m=new sap.ui.model.odata.ODataModel(s,true);c[s]=m;}return c[s];},addSystemToServiceUrl:function(u,s){jQuery.sap.log.info("Hana Adapter --> Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(s){u=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(u,s);}else{u=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(u);}}return u;},getMantissaLength:function(n){var N=n.toString();var i=0;if(n<0){i=1;}return(N.indexOf('.')===-1)?(n<0?N.length-1:N.length):N.substring(i,N.indexOf('.')).length;},getLocaleFormattedValue:function(n,s,d,i,b){jQuery.sap.require("sap.ui.core.format.NumberFormat");i=i||false;b=b||null;if(i){return sap.ui.core.format.NumberFormat.getCurrencyInstance({style:"short",showMeasure:false}).format(n,b);}var D=2;var F={style:"short"};var N;if(!(d==-1||d==null)){F.shortDecimals=Number(d);F.minFractionDigits=Number(d);F.maxFractionDigits=Number(d);}var v=sap.ui.core.format.NumberFormat.getInstance(F);if(s==-2){if(n>9999){N="????";}else if(n<0.001){N="0";}else{if(n.toString().indexOf('.')!=-1){N=Number(n).toFixed(4-n.toString().indexOf('.'));N=Number(N);}else{N=Number(n);}N=v.format(N);}}else if(d==-1||d==null){var m=this.getMantissaLength(n);if(!(m%3)){D=1;}if(m%3===1){D=3;}if(m%3===2){D=2;}if(Math.abs(n)%Math.pow(10,m-1)==0){D=0;}else if((Math.abs(n)%Math.pow(10,m-1))<6*Math.pow(10,m-4)){D=0;}v=sap.ui.core.format.NumberFormat.getInstance({style:"short",shortDecimals:D});N=v.format(n);}else{N=v.format(n);}return N;},getPlatform:function(p){return(jQuery.sap.getUriParameters().get("sb_metadata")||p||"HANA").toUpperCase();},getRunTimeUri:function(p){if(p.toUpperCase()=="HANA"){return"/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";}return"/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";},getTileTitleSubtitle:function(C){var t={};if(C.bag&&C.bag.getBagIds()&&C.bag.getBagIds().length){t.title=C.bag.getBag("sb_tileProperties").getText("title")||C.bag.getBag("sb_tileProperties").getProperty("title")||C.preview.getTitle();t.subTitle=C.bag.getBag("sb_tileProperties").getText("description")||C.bag.getBag("sb_tileProperties").getProperty("description")||C.preview.getDescription();}else{t.title=C.preview.getTitle();t.subTitle=C.preview.getDescription();}return t;},getModelerRuntimeServiceModel:function(){return this.getODataModelByServiceUri("/sap/hba/apps/kpi/s/odata/smart_business_runtime_services.xsodata");},getSapFontErrorCode:function(){return String.fromCharCode(0xe0b1);},getSapFontBusyCode:function(){return String.fromCharCode(0xe1f2);},prepareFilterStructure:function(b,d){var v=[];if(d){b=b.concat(d);}for(var i=0;i<b.length;i++){var p={};p.comparator=b[i].OPERATOR;p.filterPropertyName=b[i].NAME;if(b[i].ID){p.id=b[i].ID;}p.type=b[i].TYPE;p.value=b[i].VALUE_1;p.valueTo=b[i].VALUE_2;v.push(p);}return v;},getFilterFromRunTimeService:function(C,s,e){var p=C.TILE_PROPERTIES.sb_metadata;var K=this.getODataModelByServiceUri(this.getRunTimeUri(p));var b="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",C.EVALUATION.ID);var k=K.read("/EVALUATION_FILTERS",null,{"$filter":b},true,function(d){var h=[];if(d.results.length){h=d.results;}s.call(this,h);},e);return k;},findTextPropertyForDimension:function(u,b,d){try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var D=q.findDimensionByName(d);if(D.getTextProperty()){return D.getTextProperty().name;}else{return d;}}catch(e){$.sap.log.error("Error Fetching Text Property for "+d+" : "+e.toString());}},getEvalValueMeasureName:function(C,t,r){var e=C.EVALUATION_VALUES;for(var i=0;i<e.length;i++){if(e[i].TYPE==t){if(r==="FIXED"){return e[i].FIXED;}else{return e[i].COLUMN_NAME;}}}},getSemanticColorName:function(b){var s="";if(b=="Error"){s="sb.error";}if(b=="Neutral"){s="sb.neutral";}if(b=="Critical"){s="sb.critical";}if(b=="Good"){s="sb.good";}return s;},setTooltipInTile:function(C,t,v){var b="";var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(t=="NT"||t=="DT"){if(v.status){b+=r.getText("sb.status")+": "+r.getText(v.status)+"\n";}if(v.actual){b+=r.getText("sb.actual")+": "+v.actual+"\n";}if(v.target){b+=r.getText("sb.target")+": "+v.target+"\n";}if(v.cH){b+=r.getText("sb.ch")+": "+v.cH+"\n";}if(v.wH){b+=r.getText("sb.wh")+": "+v.wH+"\n";}if(v.wL){b+=r.getText("sb.wl")+": "+v.wL+"\n";}if(v.cL){b+=r.getText("sb.cl")+": "+v.cL+"\n";}}if(t=="CONT"||t=="COMP"){if(v.measure&&t=="CONT"){b+=r.getText("sb.topn")+": "+v.measure+"\n";}if(v.m1&&((v.v1==undefined||v.v1==null)?false:v.v1.toString())&&v.c1){b+=v.m1+": "+v.v1+" "+r.getText(v.c1)+"\n";}if(v.m2&&((v.v2==undefined||v.v2==null)?false:v.v2.toString())&&v.c2){b+=v.m2+": "+v.v2+" "+r.getText(v.c2)+"\n";}if(v.m3&&((v.v3==undefined||v.v3==null)?false:v.v3.toString())&&v.c3){b+=v.m3+": "+v.v3+" "+r.getText(v.c3)+"\n";}}C.setTooltip(b);},_getFormattedTileProperties:function(t){t=t||{};var p=["sb_metadata","sb_navigation","sb_catalog"];var b=false;for(var i=0;!b&&i<p.length;i++){b=b||jQuery.sap.getUriParameters().get(p[i])||t[p[i]];}t.sb_metadata=(jQuery.sap.getUriParameters().get("sb_metadata")||t.sb_metadata||"HANA").toLowerCase();t.sb_navigation=(jQuery.sap.getUriParameters().get("sb_navigation")||t.sb_navigation||"abap").toLowerCase();t.sb_catalog=(jQuery.sap.getUriParameters().get("sb_catalog")||t.sb_catalog||"HANA").toLowerCase();t.isPlatformInfoPresent=b;return t;},getParsedChip:function(C,b){var p={};var d=JSON.parse(C);var e=JSON.parse(d.TILE_PROPERTIES).evaluationId||"";var t=this;if(d.TAGS){p["TAGS"]=JSON.parse(d.TAGS);}if(d.ADDITIONAL_FILTERS){p["ADDITIONAL_FILTERS"]=JSON.parse(d.ADDITIONAL_FILTERS);}if(d.ADDITIONAL_APP_PARAMETERS){p["ADDITIONAL_APP_PARAMETERS"]=JSON.parse(d.ADDITIONAL_APP_PARAMETERS);}p.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(d.TILE_PROPERTIES));var P=p.TILE_PROPERTIES.sb_metadata;if(d.EVALUATION_FILTERS){p["EVALUATION_FILTERS"]=JSON.parse(d.EVALUATION_FILTERS);if(d.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(d.EVALUATION_VALUES);if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",P,e,function(h){p["EVALUATION_VALUES"]=h;if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}});}}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",P,e,function(h){p["EVALUATION_FILTERS"]=h;if(d.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(d.EVALUATION_VALUES);if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",P,e,function(h){p["EVALUATION_VALUES"]=h;if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);b(p);}else{t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",P,e,function(h){p.EVALUATION=h;b(p);});}});}});}},getEvaluationDetailsFromRunTimeService:function(e,p,i,b){var K=this.getODataModelByServiceUri(this.getRunTimeUri(p));var d="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);var k=K.read(e,null,{"$filter":d},true,function(h){var j=[];if(h.results.length){j=h.results;}b.call(this,j);});},getNavigationTarget:function(C,s){var b=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;var o=b&&b("CrossApplicationNavigation");var e;var p={};p["evaluationId"]=C.EVALUATION.ID;p["chipId"]=C.TILE_PROPERTIES.id;if(s){p["sap-system"]=s;}p["tileType"]=C.TILE_PROPERTIES.tileType;if(C.TILE_PROPERTIES.dimension){p["dimension"]=C.TILE_PROPERTIES.dimension;}if(C.TILE_PROPERTIES.storyId){p["storyId"]=C.TILE_PROPERTIES.storyId;}if(C.TILE_PROPERTIES.apfConfId){p["sap-apf-configuration-id"]=C.TILE_PROPERTIES.apfConfId;}if(C.TILE_PROPERTIES.isPlatformInfoPresent){p["sb_metadata"]=C.TILE_PROPERTIES.sb_metadata;p["sb_navigation"]=C.TILE_PROPERTIES.sb_navigation;p["sb_catalog"]=C.TILE_PROPERTIES.sb_catalog;}if(C.ADDITIONAL_APP_PARAMETERS){for(e in C.ADDITIONAL_APP_PARAMETERS){if(C.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(e)){if(C.ADDITIONAL_APP_PARAMETERS[e].constructor==Array){var d=C.ADDITIONAL_APP_PARAMETERS[e];for(var i=0;i<d.length;i++){p[e]=d[i];}}else{p[e]=C.ADDITIONAL_APP_PARAMETERS[e];}}}}var t=o&&o.hrefForExternal({target:{semanticObject:C.TILE_PROPERTIES.semanticObject,action:C.TILE_PROPERTIES.semanticAction},params:p})||"";if(C.ADDITIONAL_FILTERS){var h=C.ADDITIONAL_FILTERS;var k="&";for(var j=0;j<h.length;j++){if(h[j].OPERATOR==="EQ"){k=k+"/"+h[j].NAME+"="+h[j].VALUE_1;}}t+=k;}return t;},getChipTitle:function(C){var t="";if(C){var b=C.EVALUATION||{};t=b.INDICATOR_TITLE||"";}return t;},getstringifyTileConfig:function(C){var s={};s.EVALUATION=JSON.stringify(C.EVALUATION);s.EVALUATION_FILTERS=JSON.stringify(C.EVALUATION_FILTERS);s.EVALUATION_VALUES=JSON.stringify(C.EVALUATION_VALUES);s.TILE_PROPERTIES=JSON.stringify(C.TILE_PROPERTIES);return JSON.stringify(s);},getChipSubTitle:function(C){var t="";if(C){var b=C.EVALUATION||{};t=b.TITLE||"";}return t;},getFormattingMetadata:function(u,e,p){var b={};b._hasCurrency=false;b._hasSapText=false;var m=null;if(u instanceof sap.ui.model.odata.ODataModel){m=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(u);}else{var t=this.getODataModelByServiceUri(u);m=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(t);}var O=new sap.ui.model.analytics.odata4analytics.Model(m);var q=O.findQueryResultByName(e);var d=q.getAllMeasures();if(d[p]){var s=(d[p]._oTextProperty&&d[p]._oTextProperty.name)?d[p]._oTextProperty.name:"";if(s!=""){b._hasSapText=true;b._sapTextColumn=s;}else if(d[p].hasOwnProperty("_oUnitProperty")){var h=d[p]._oUnitProperty.extensions;for(var i=0;i<d[p]._oUnitProperty.extensions.length;i++){if(h[i].name==="semantics"&&h[i].value==="currency-code"){b._hasCurrency=true;b._currencyColumn=d[p]._oUnitProperty.name;}}}}return b;},prepareQueryServiceUri:function(u,b,m,d,v,o,t){function _(S){return S.replace(/'/g,"''");}var h=null;try{var n=null;if(u instanceof sap.ui.model.odata.ODataModel){n=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(u);}else{var p=this.getODataModelByServiceUri(u);n=sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(p);}var O=new sap.ui.model.analytics.odata4analytics.Model(n);var q=O.findQueryResultByName(b);var Q=new sap.ui.model.analytics.odata4analytics.QueryResultRequest(q);if(m){Q.setMeasures(m.split(","));Q.includeMeasureRawFormattedValueUnit(null,true,true,true);}if(d){if(typeof d=="string"){h=d;h=h.split(",");}for(var i=0;i<h.length;i++){Q.addToAggregationLevel([h[i]]);var r=q.getAllDimensions();if(r[h[i]].getTextProperty()!=null){Q.includeDimensionKeyTextAttributes([h[i]],true,true,null);}}}if(v&&v.length){var s=[];var w=[];for(var i=0,l=v.length;i<l;i++){var x=v[i];if(x.type==="PA"){w.push(x);}else if(x.type==="FI"){s.push(x);}}function A(S){var T=S.toJSON();var U=T.charAt(T.length-1).toUpperCase();if(U.charCodeAt(0)>=65&&U.charCodeAt(0)<=90){T=T.slice(0,-1);}return T;};function B(S){if(S){try{if(S==+S){S=window.parseInt(S);}var T=new Date(S);var U=T.getTime();if(isNaN(U)){return S;}else{return A(T);}}catch(e){}}return S;};if(s.length){var F=Q.getFilterExpression();for(var i=0,l=s.length;i<l;i++){var x=s[i];if(this.getEdmType(u,x.filterPropertyName)=="Edm.DateTime"){x.value=B(x.value);x.valueTo=B(x.valueTo);}if(x.comparator==sap.ui.model.FilterOperator.BT){F.addCondition(x.filterPropertyName,x.comparator,_(x.value),x.valueTo);}else{var C=x.value.split(",");for(var j=0,k=C.length;j<k;j++){F.addCondition(x.filterPropertyName,x.comparator,_(C[j].replace(/\^\|/g,",")),null);}}}}if(w.length){if(q.getParameterization()){var P=new sap.ui.model.analytics.odata4analytics.ParameterizationRequest(q.getParameterization());var D=q.getParameterization();var E,G,H,I,J,K;for(var y=0,z=w.length;y<z;y++){E=w[y];G=D.findParameterByName(E.filterPropertyName);if(G.isIntervalBoundary()===true&&G.isLowerIntervalBoundary()===true){H=G.getPeerIntervalBoundaryParameter();K=H.getPeerIntervalBoundaryParameter();for(var i=0,l=w.length;i<l;i++){if(w[i].filterPropertyName===K){J=_(w[i].value);break;}}I=_(E.value);if(J){P.setParameterValue(E.filterPropertyName,I,J);}else{}}else if(G.isIntervalBoundary()===true&&G.isLowerIntervalBoundary()===false){}else{P.setParameterValue(E.filterPropertyName,_(E.value));}}Q.setParameterizationRequest(P);}}}var L=Q.getURIToQueryResultEntries();if(o&&o.length){L=L+"&$orderby=";for(var y=0,z=o.length;y<z;y++){var M=o[y].sortOrder||"asc";if(M){L+=o[y].element+" "+M+",";}}L=L.slice(0,L.length-1);}if(t){L=L+"&$top="+t;}var N=q.getAllMeasures();var R=[];for(var i=0;i<m.split(",").length;i++){R.push(N[m.split(",")[i]].getUnitProperty());}return{uri:L,model:O.getODataModel(),unit:R};}catch(e){$.sap.log.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){$.sap.log.error("Arguments Passed to this function");$.sap.log.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3]);}else{$.sap.log.error("NO Arguments passed to this function");}return null;}},_getOData4AnalyticsObject:function(u){var m=null;if(u instanceof sap.ui.model.odata.ODataModel){m=u;}else if(typeof u=="string"){m=this.getODataModelByServiceUri(u);}else{throw new Error("Invalid Input to Create ODataModel Object : "+u);}var O=new sap.ui.model.analytics.odata4analytics.Model(sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(m));return O;},getAllEntitySet:function(u){var b=[];try{var o=this._getOData4AnalyticsObject(u);b=o.getAllQueryResultNames();}catch(e){$.sap.log.error("Error fetching Enity Set : "+e.toString());}return b;},getAllMeasures:function(u,b){var m=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);m=q.getAllMeasureNames();}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString());}return m;},getAllMeasuresWithLabelText:function(u,b){var m=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var d=q.getAllMeasureNames();for(var i=0;i<d.length;i++){var h=d[i];g.oMeasure=q.findMeasureByName(h);m.push({key:h,value:oMeasure.getLabelText()});}}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString());}return m;},getAllDimensions:function(u,b){function i(j,k){var l=0,m=0;var r=[];while(l<j.length&&m<k.length){if(j[l]<k[m]){l++;}else if(j[l]>k[m]){m++;}else{r.push(j[l]);l++;m++;}}return r;}var d=[];var F=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var h=q.getEntityType();F=h.getFilterablePropertyNames();d=q.getAllDimensionNames();if(F&&F.length){d=i(F.sort(),d.sort());}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString());}return d;},getAllDimensionsWithLabelText:function(u,b){var d=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);var h=q.getAllDimensionNames();for(var i=0;i<h.length;i++){var j=h[i];var D=q.findDimensionByName(j);var t=null;if(D.getTextProperty()!=null){t=D.getTextProperty().name;}d.push({key:j,value:D.getLabelText(),textProperty:t});}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString());}return d;},getAllInputParams:function(u,b){var i=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);if(q.getParameterization()){var p=q.getParameterization();i=p.getAllParameterNames();}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString());}return i;},getAllInputParamsWithFlag:function(u,b){var d=[];try{var o=this._getOData4AnalyticsObject(u);var q=o.findQueryResultByName(b);if(q.getParameterization()){var p=q.getParameterization();var h=p.getAllParameterNames();for(var i=0;i<h.length;i++){var j=h[i];var k=p.findParameterByName(j);d.push({name:j,optional:k.isOptional()});}}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString());}return d;},formatOdataObjectToString:function(v){if(v&&v.constructor==Object){if(v.__edmType=="Edm.Time"){var m=v.ms;var s=Math.floor((m/1000)%60);var b=Math.floor((m/60000)%60);var h=Math.floor((m/3600000)%24);return h+"H"+b+"M"+s+"S";}}return v;},generateCombinations:function(b){function d(h,s){while(s.length<h){s='0'+s;}return s;}var m=Math.pow(2,b.length);var r=[];var e=0;while(m>1){var s=(m-1).toString(2);s=d(b.length,s);r[e]=[];for(var i=0;i<s.length;i++){if(Number(s[i])){r[e].push(b[i]);}}m--;e++;}return r;},logError:function(e,C){if(e=="no data"&&C){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();C.setFailedText(r.getText("sb.noData"));}jQuery.sap.log.error(e.toString());},numberOfLeadingZeros:function(n){n=String(n);var b=0;var d=n.indexOf('.');if(d==-1){return 0;}if(Number(n.split('.')[0])!=0){return 0;}var i=d+1;while(n[i++]=='0'){++b;}return b;},formatValue:function(v,s,M){M=M||3;var u={3:"K",6:"M",9:"B",12:"T",0:""};u["-3"]="m";u["-6"]="u";u["-9"]="n";u["-12"]="t";u["-2"]="%";var t,p,b;t=Number(v).toPrecision(M);var z=this.numberOfLeadingZeros(t);if(z>0&&s<0){p=t*Math.pow(10,z+M);b=-(z+M);}else{p=Number(t.split("e")[0]);b=Number(t.split("e")[1])||0;}if(!v&&v!=0){return{value:"",unitPrefix:""};}if(s>=0){if(b%3!=0){if(b%3==2){if(b+1==s){b=b+1;p=p/10;}else{b=b-2;p=p*100;}}else{if(b+2==s){b=b+2;p=p/100;}else{b--;p=p*10;}}}else if(b==15){p=p*1000;b=12;}}else{if(s=="-2"){var x=this.formatValue((v*100),0);}else if(b>=0&&v<10&&s=="-3"){p=v*Math.pow(10,3);b=-3;}else if(b>=0){return this.formatValue(v,0);}else{b=Math.abs(b);s=Math.abs(s);if(s>b){p=p/(Math.pow(10,b%3));b=b-(b%3);}else{var d=b-s;p=p/(Math.pow(10,d));b=b-d;}b=0-b;}}p+="";if(s=="-2"){var e=(x.unitPrefix=="")?Number(x.value+"").toFixed(4-(x.value+"").indexOf('.')):Number(x.value+"").toFixed(3-(x.value+"").indexOf('.'));return{value:Number(e),unitPrefix:(x.unitPrefix)+u[-2]};}p=Number(p).toFixed(4-p.indexOf('.'));return{value:Number(p),unitPrefix:u[b]};},getHanaClient:function(){var b;var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getCacheHanaClient();if(e){b=e;return b;}jQuery.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:function(d,s,x){b=d.sessionClient;},error:function(j,t,d){jQuery.sap.log.error(j.responseText);}});sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(b);return b;},abortPendingODataCalls:function(d){try{if(d){d.abort();}}catch(e){this.logError(e);}}};})(window,jQuery);sap.ushell.components.tiles.indicatorTileUtils.cache=(function(){var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){if(B[s]){return B[s];}return null;},setCacheHanaClient:function(d){B[s]=d;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},setEvaluationById:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};})();
