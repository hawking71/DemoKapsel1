// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.Navigation");sap.ushell.renderers.fiori2.Navigation=function(){this.CATALOG={ID:"ShellCatalog",SEMANTICOBJECT:"shell",ACTION:"catalog",filters:{}};this.SEARCH={ID:"ShellSearch",SEMANTICOBJECT:"shell",ACTION:"search"};sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"Shell Internal Navigation",isApplicable:jQuery.proxy(this.navTargetIsApplicableForShell,this),resolveHashFragment:jQuery.proxy(this.resolveHashFragmentForShell,this)});sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"Search App Container",isApplicable:function(h){return h==="#Action-search";},resolveHashFragment:function(h){var d=new jQuery.Deferred(),r={};if(h==="#Action-search"){r={"additionalInformation":"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container","applicationType":"URL","url":jQuery.sap.getResourcePath("sap/ushell/renderers/fiori2/search/container")};}d.resolve(r);return d.promise();}});};sap.ushell.renderers.fiori2.Navigation.prototype.openCatalogByHash=function(d,s){if(d){this.CATALOG.filters=d;}var h="#"+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:this.CATALOG.SEMANTICOBJECT,action:this.CATALOG.ACTION},params:{catalogSelector:[this.CATALOG.filters.categoryFilter||""],tileFilter:[this.CATALOG.filters.searchFilter||""],tagFilter:[this.CATALOG.filters.tagFilter||""]}});sap.ushell.Container.getService("ShellNavigation").hashChanger.privsetHash(h,s===undefined?true:s);jQuery(document).off('keydown.dashboard');jQuery(document).off('keydown.catalog');jQuery(document).on('keydown.catalog',sap.ushell.renderers.fiori2.AccessKeysHandler.catalogKeydownHandler);};sap.ushell.renderers.fiori2.Navigation.prototype.navTargetIsApplicableForShell=function(h){var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));return a&&(a.semanticObject===this.CATALOG.SEMANTICOBJECT&&a.action===this.CATALOG.ACTION);};sap.ushell.renderers.fiori2.Navigation.prototype.resolveHashFragmentForShell=function(h){var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1)),d=new jQuery.Deferred(),r={};if(a.action===this.CATALOG.ACTION){r={applicationType:this.CATALOG.ID,catalogSelector:a.params.catalogSelector,tileFilter:a.params.tileFilter,targetGroup:a.params.targetGroup,tagFilter:a.params.tagFilter};}d.resolve(r);return d.promise();};sap.ushell.renderers.fiori2.Navigation=new sap.ushell.renderers.fiori2.Navigation();}());
