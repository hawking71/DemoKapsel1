(function(){"use strict";jQuery.sap.require('sap.m.Bar');jQuery.sap.require('sap.m.Label');jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.m.ButtonType');jQuery.sap.require('sap.m.ToggleButton');jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchHelper');var s=sap.ushell.renderers.fiori2.search.SearchHelper;sap.m.Bar.extend('sap.ushell.renderers.fiori2.search.controls.SearchBar',{constructor:function(o,i){var a=this;a.sMarginPropValueSmall="0.5rem";a.sMarginPropValueBig="13.5rem";if(jQuery("html").attr("dir")==='rtl'){a.sMarginPropName="margin-right";}else{a.sMarginPropName="margin-left";}a.filterButtonPressed=s.loadFilterButtonStatus();a.filterBtn=new sap.m.ToggleButton({icon:sap.ui.core.IconPool.getIconURI("filter"),tooltip:a.filterButtonPressed?sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"):sap.ushell.resources.i18n.getText("showFacetBtn_tooltip"),pressed:a.filterButtonPressed,press:function(){if(this.getPressed()){o.oSearchLayout.setShowFacets(true);a._animateFilterBtn(this.getPressed(),400,function(){jQuery(this).attr("title",sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"));});}else{o.oSearchLayout.setShowFacets(false);a._animateFilterBtn(this.getPressed(),400,function(){jQuery(this).attr("title",sap.ushell.resources.i18n.getText("showFacetBtn_tooltip"));});}}});a.filterBtn.addStyleClass('searchBarFilterButton');a.filterBtn.addEventDelegate({onAfterRendering:function(){a._animateFilterBtn(a.filterBtn.getPressed(),0);}});o=jQuery.extend({},{contentLeft:[new sap.m.Button({type:sap.m.ButtonType.Back,press:function(e){window.history.back(1);},tooltip:"{i18n>backBtn_tooltip}"})],contentMiddle:[new sap.m.Label({text:"{i18n>search}"})]},o);if(!sap.ui.Device.system.phone){o.contentLeft.push(this.filterBtn);}sap.m.Bar.prototype.constructor.apply(this,[o],i);this.addStyleClass('searchBar');},_animateFilterBtn:function(p,n,c){var a=this;var m={};if(p){m[a.sMarginPropName]=a.sMarginPropValueBig;}else{m[a.sMarginPropName]=a.sMarginPropValueSmall;}jQuery(a.filterBtn.getDomRef()).animate(m,{duration:n,complete:c});},renderer:'sap.m.BarRenderer'});})();
