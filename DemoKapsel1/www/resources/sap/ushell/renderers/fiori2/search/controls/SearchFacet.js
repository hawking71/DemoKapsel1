(function(){"use strict";jQuery.sap.require('sap.m.List');jQuery.sap.require("sap.ushell.renderers.fiori2.search.controls.SearchFacetItem");sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacet',{metadata:{properties:{role:{defaultValue:"datasource"},hasMoreLink:{type:"boolean",defaultValue:false},detailText:"string"}},constructor:function(i,o){var s=this;o=jQuery.extend({},{mode:sap.m.ListMode.SingleSelectMaster,showSeparators:sap.m.ListSeparators.None,selectionChange:function(e){var S=e.mParameters.listItem.getBindingContext().getObject();if(S.selected){s.getModel().addFilterCondition(S);}else{s.getModel().removeFilterCondition(S);}}},o);sap.m.List.prototype.constructor.apply(this,[i,o]);this.addStyleClass('searchFacet');this.addEventDelegate({onAfterRendering:function(){if(s.getRole()==="datasource"){jQuery(s.getDomRef()).append("<hr>");}}});},renderer:'sap.m.ListRenderer',setRole:function(r){var i={path:"items",template:new sap.ushell.renderers.fiori2.search.controls.SearchFacetItem(),groupHeaderFactory:function(g){return new sap.m.GroupHeaderListItem({title:g.key,upperCase:false});},};switch(r.toLowerCase()){case"datasource":this.setMode(sap.m.ListMode.SingleSelectMaster);this.setHeaderText("Search In");break;case"attribute":this.setMode(sap.m.ListMode.MultiSelect);this.setHeaderText("");i.sorter=new sap.ui.model.Sorter("facetTitle",false,true);break;}this.bindAggregation("items",i);this.setProperty("role",r);return this;}});})();
