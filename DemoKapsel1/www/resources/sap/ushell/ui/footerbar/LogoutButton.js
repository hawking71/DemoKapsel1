/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButton");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.m.Button");sap.m.Button.extend("sap.ushell.ui.footerbar.LogoutButton",{metadata:{library:"sap.ushell"}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButton");jQuery.sap.require("sap.ushell.resources");sap.ushell.ui.footerbar.LogoutButton.prototype.init=function(){this.setIcon('sap-icon://log');this.setTooltip(sap.ushell.resources.i18n.getText("logoutBtn_tooltip"));this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("logoutBtn_title"));this.attachPress(this.logout);this.setEnabled();if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.LogoutButton.prototype.logout=function(){jQuery.sap.require('sap.m.MessageBox');var s=true,i=false,l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){l.exit();l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});}var L=_(d);sap.m.MessageBox.show(L.message,L.icon,L.messageTitle,[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],function(a){if(a===sap.m.MessageBox.Action.OK){l.openLoadingScreen();l.showAppInfo(sap.ushell.resources.i18n.getText('beforeLogoutMsg'),null);sap.ushell.Container.logout();}},sap.ui.core.ElementMetadata.uid("confirm"));});if(s===true){l.openLoadingScreen();i=true;}};sap.ushell.ui.footerbar.LogoutButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Logout' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LogoutButton");}e=false;}sap.m.Button.prototype.setEnabled.call(this,e);};var _=function(d){var l={},r=sap.ushell.resources.i18n;if(d===sap.ushell.Container.DirtyState.DIRTY){l.message=r.getText('unsaved_data_warning_popup_message');l.icon=sap.m.MessageBox.Icon.WARNING;l.messageTitle=r.getText("unsaved_data_warning_popup_title");}else{l.message=r.getText('logoutConfirmationMsg');l.icon=sap.m.MessageBox.Icon.QUESTION;l.messageTitle=r.getText("title_confirm");}return l;};}());
